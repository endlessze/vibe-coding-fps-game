<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOOM PROTOCOL - Hellish Combat Arena (TypeScript)</title>
    <link rel="icon" type="image/png" href="assets/favicon.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&family=Exo+2:wght@300;400;600;700&family=Space+Mono:wght@400;700&family=Inter:wght@300;400;500;600&family=Fira+Code:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    
    <!-- Socket.IO for multiplayer networking -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  </head>
  <body>
    <script type="module" src="/main.ts"></script>
    <!-- Main Menu -->
    <div id="mainMenu" class="menu-screen">
      <h1>🔥 DOOM PROTOCOL 🔥</h1>
      <h2>HELLISH COMBAT ARENA</h2>
      <p class="subtitle">TypeScript Edition</p>
      
      <div class="menu-buttons">
        <button id="singlePlayerBtn" class="menu-button success">
          👤 SINGLE PLAYER TRAINING
        </button>
        <button id="multiPlayerBtn" class="menu-button">
          🎮 ENTER HELL (MULTIPLAYER)
        </button>
        <button class="menu-button" onclick="showInstructions()">
          📖 COMBAT MANUAL
        </button>
      </div>
      
      <p class="powered-by">Powered by Three.js & TypeScript Hellish Engine</p>
      <p class="version">Version 1.0.0</p>

      <!-- Social Media Icons -->
      <div class="social-icons">
        <a
          href="https://github.com/yournamehere"
          target="_blank"
          class="social-icon github"
          title="GitHub"
        >
          <i class="fab fa-github"></i>
        </a>
        <a
          href="https://twitter.com/yournamehere"
          target="_blank"
          class="social-icon twitter"
          title="Twitter"
        >
          <i class="fab fa-twitter"></i>
        </a>
      </div>
    </div>

    <!-- Instructions Screen -->
    <div id="instructionsScreen" class="menu-screen" style="display: none;">
      <h1>🎯 COMBAT MANUAL 🎯</h1>
      <div class="instructions-content">
        <div class="control-section">
          <h3>🎮 CONTROLS</h3>
          <div class="controls-grid">
            <div class="control-item">
              <strong>W/A/S/D</strong>
              <span>Move around the hellish arena</span>
            </div>
            <div class="control-item">
              <strong>Mouse</strong>
              <span>Look around and aim at demons</span>
            </div>
            <div class="control-item">
              <strong>Left Click / Space</strong>
              <span>Fire your weapon</span>
            </div>
            <div class="control-item">
              <strong>R</strong>
              <span>Reload weapon</span>
            </div>
            <div class="control-item">
              <strong>1-4 Number Keys</strong>
              <span>Switch weapons (1-Shotgun, 2-Chaingun, 3-Rocket Launcher, 4-Plasma Rifle)</span>
            </div>
            <div class="control-item">
              <strong>ESC</strong>
              <span>Pause game / Settings</span>
            </div>
          </div>
        </div>
        
        <div class="weapons-section">
          <h3>🔫 WEAPONS ARSENAL</h3>
          <div class="weapons-grid">
            <div class="weapon-item">
              <span class="weapon-emoji">🔫</span>
              <strong>Shotgun</strong>
              <p>Close-range devastation with spread damage</p>
            </div>
            <div class="weapon-item">
              <span class="weapon-emoji">⚡</span>
              <strong>Chaingun</strong>
              <p>Rapid-fire automatic destruction</p>
            </div>
            <div class="weapon-item">
              <span class="weapon-emoji">🚀</span>
              <strong>Rocket Launcher</strong>
              <p>Explosive area damage for crowd control</p>
            </div>
            <div class="weapon-item">
              <span class="weapon-emoji">🔥</span>
              <strong>Plasma Rifle</strong>
              <p>High-energy projectiles with precision</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="menu-buttons">
        <button class="menu-button" onclick="hideInstructions()">
          ← BACK TO HELL
        </button>
      </div>
    </div>

    <!-- Multiplayer Lobby Screen -->
    <div id="multiplayerLobby" class="menu-screen" style="display: none;">
      <h1>🔥 HELLISH COMBAT LOBBY 🔥</h1>
      
      <!-- Top Configuration Section -->
      <div class="top-config-section">
        <!-- Player Info -->
        <div class="player-info">
          <input 
            type="text" 
            id="playerName" 
            placeholder="Enter your demon name..." 
            maxlength="20" 
            minlength="2"
            pattern="[A-Za-z0-9_-]+"
            title="Use only letters, numbers, underscores, and hyphens"
            required
            autocomplete="username"
          />
          <div id="usernameHelper" class="username-helper">👹 Choose your demonic identity (2-20 characters)</div>
          <div id="connectionStatus">🔴 Disconnected from Hell</div>
        </div>

        <!-- Server Configuration -->
        <div class="server-config">
          <h3>🌐 SERVER CONNECTION</h3>
          <div class="server-options">
            <div class="server-option">
              <input type="radio" id="localServer" name="serverType" value="local" checked />
              <label for="localServer">🏠 Local Server (localhost:3000)</label>
            </div>
            <div class="server-option">
              <input type="radio" id="lanServer" name="serverType" value="lan" />
              <label for="lanServer">🌐 LAN Server</label>
              <input type="text" id="lanServerIP" placeholder="192.168.1.100:3000" disabled />
            </div>
            <div class="server-option">
              <input type="radio" id="customServer" name="serverType" value="custom" />
              <label for="customServer">⚙️ Custom Server</label>
              <input type="text" id="customServerIP" placeholder="server-ip:port" disabled />
            </div>
          </div>
          <button class="menu-button" id="connectServerBtn">
            🔗 CONNECT TO HELL
          </button>
        </div>
      </div>

      <!-- Room Management -->
      <div class="lobby-content">
        <div class="lobby-section">
          <h3>🏰 CREATE HELLISH CHAMBER</h3>
          <div class="room-creation">
            <input type="text" id="roomName" placeholder="Chamber name..." maxlength="30" />
            <select id="maxPlayers">
              <option value="2">2 Demons</option>
              <option value="3">3 Demons</option>
              <option value="4" selected>4 Demons</option>
            </select>
            <select id="mapType">
              <option value="industrial">Industrial Hell</option>
              <option value="hellscape">Classic Hellscape</option>
              <option value="techbase">Tech Base</option>
            </select>
            <button class="menu-button success" id="createRoomBtn">
              🔥 CREATE CHAMBER
            </button>
          </div>
        </div>

        <div class="lobby-section">
          <h3>👹 AVAILABLE CHAMBERS</h3>
          <div id="roomList" class="room-list">
            <div class="room-item loading">
              <span>🔄 Scanning Hell for chambers...</span>
            </div>
          </div>
          <button class="menu-button" id="refreshRoomsBtn">
            🔄 REFRESH CHAMBERS
          </button>
        </div>
      </div>

      <div class="lobby-buttons">
        <button class="menu-button" id="backToMenuBtn">
          ← BACK TO MENU
        </button>
      </div>
    </div>

    <!-- Party Room Screen -->
    <div id="partyRoom" class="menu-screen" style="display: none;">
      <h1 id="roomTitle">🔥 HELLISH CHAMBER 🔥</h1>
      
      <div class="party-content">
        <div class="party-section">
          <h3>👹 DEMONS IN CHAMBER</h3>
          <div id="partyMembers" class="party-members">
            <!-- Party members will be populated here -->
          </div>
        </div>

        <div class="party-section">
          <h3>💬 HELL CHAT</h3>
          <div id="chatContainer" class="chat-container">
            <div id="chatMessages" class="chat-messages">
              <!-- Chat messages will appear here -->
            </div>
            <div class="chat-input">
              <input type="text" id="chatInput" placeholder="Speak to your demon allies..." maxlength="200" />
              <button id="sendChatBtn">📨</button>
            </div>
          </div>
        </div>
      </div>

      <div class="party-buttons">
        <button class="menu-button" id="readyButton">
          ⏳ NOT READY
        </button>
        <button class="menu-button success" id="startGameButton" disabled>
          🎮 BEGIN HELLISH COMBAT
        </button>
        <button class="menu-button danger" id="leaveRoomBtn">
          🚪 LEAVE CHAMBER
        </button>
      </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="menu-screen" style="display: none;">
      <h1>💀 HELL HAS CLAIMED YOU 💀</h1>
      <div id="finalStats">
        <div>🔥 Demons Slain: <span id="finalKills">0</span></div>
        <div>🌊 Waves Survived: <span id="finalWaves">0</span></div>
        <div>⏱️ Time in Hell: <span id="finalTime">0</span></div>
      </div>
      <div class="menu-buttons">
        <button class="menu-button success" id="restartGameBtn">
          🔄 RETURN TO HELL
        </button>
        <button class="menu-button" id="backToMainMenuBtn">
          🏠 BACK TO MENU
        </button>
      </div>
    </div>

    <!-- Game UI Overlay -->
    <div id="gameUI" class="game-ui" style="display: none;">
      <div class="hud-top">
        <div class="health-bar">
          <div class="health-label">HEALTH</div>
          <div class="health-bar-container">
            <div id="healthBar" class="health-bar-fill"></div>
          </div>
          <div id="healthValue" class="health-value">100</div>
        </div>
        
        <div class="game-stats">
          <div class="stat-item">
            <div class="stat-label">WAVE</div>
            <div id="waveNumber" class="stat-value">1</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">KILLS</div>
            <div id="killCount" class="stat-value">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">SCORE</div>
            <div id="scoreValue" class="stat-value">0</div>
          </div>
        </div>
      </div>
      
      <!-- Center crosshair -->
      <div class="crosshair">+</div>
      
      <!-- Radar in top right corner -->
      <div class="radar-container">
        <canvas id="radarCanvas" width="120" height="120"></canvas>
        <div class="radar-label">RADAR</div>
      </div>
      
      <div class="hud-bottom">
        <div class="weapon-info">
          <div id="currentWeapon" class="weapon-name">SHOTGUN</div>
          <div class="ammo-info">
            <span id="currentAmmo">8</span> / <span id="maxAmmo">50</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="menu-screen" style="display: none;">
      <h1>💀 HELL HAS CLAIMED YOU 💀</h1>
      <div id="finalStats">
        <div>🔥 Demons Slain: <span id="finalKills">0</span></div>
        <div>🌊 Waves Survived: <span id="finalWaves">0</span></div>
        <div>⏱️ Time in Hell: <span id="finalTime">0</span></div>
      </div>
      <div class="menu-buttons">
        <button id="restartGameBtn" class="menu-button success">
          🔄 RETURN TO HELL
        </button>
        <button id="backToMainMenuBtn" class="menu-button">
          🏠 BACK TO MENU
        </button>
      </div>
    </div>

    <!-- Pause Menu -->
    <div id="pauseMenu" class="menu-screen" style="display: none;">
      <h1>⏸️ GAME PAUSED ⏸️</h1>
      <div class="menu-buttons">
        <button id="resumeBtn" class="menu-button success">
          ▶️ RESUME COMBAT
        </button>
        <button id="restartBtn" class="menu-button">
          🔄 RESTART WAVE
        </button>
        <button id="mainMenuBtn" class="menu-button">
          🏠 MAIN MENU
        </button>
      </div>
      <p class="pause-hint">Press ESC to resume</p>
    </div>

    <script>
      function showInstructions() {
        // Set body to menu mode to allow scrolling
        document.body.className = "menu-mode";
        document.getElementById('mainMenu').style.display = 'none';
        document.getElementById('instructionsScreen').style.display = 'flex';
      }
      
      function hideInstructions() {
        // Keep body in menu mode
        document.body.className = "menu-mode";
        document.getElementById('instructionsScreen').style.display = 'none';
        document.getElementById('mainMenu').style.display = 'flex';
      }
    </script>
  </body>
</html> 